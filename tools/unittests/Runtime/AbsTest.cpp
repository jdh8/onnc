#if defined(__GNUC__) || defined(_MSC_VER)
#define restrict __restrict
#else
#define restrict
#endif

extern "C" {
#include <onnc/Runtime/onnc-runtime.h>
}

#undef restrict

#include "relative-error.hpp"
#include <skypat/skypat.h>
SKYPAT_F(Operator_Abs, test_abs) {
  const float input_0[] = {
      -0.32850933, -0.13364254, -1.171661,    -0.22614476,  0.75363034,
      -0.38939148, 1.5956291,   -0.23756184,  -0.51147854,  -1.4226911,
      -0.02010123, -0.5678232,  1.541213,     0.77426434,   -0.94563985,
      -0.35861114, 2.058842,    0.040001184,  -0.80283463,  -0.9266201,
      0.11731918,  -0.6653804,  0.23948292,   0.3698896,    0.27398875,
      0.7207754,   -0.63963854, -1.3779292,   -0.247692,    -0.74817693,
      0.29667214,  -1.3250277,  -0.4428566,   -0.117677756, -1.1797862,
      -1.4667867,  0.679358,    -0.113703586, -1.8667607,   0.17597108,
      0.754801,    -0.36061656, -1.9848528,   0.055183206,  0.5254452,
      0.6051861,   -0.29676306, -1.9656936,   1.36459,      -0.7973592,
      0.997574,    0.68527496,  0.9305327,    0.20848726,   0.16072977,
      -0.2589024,  0.7212597,   0.78417134,   0.30299196,   -1.5492778};
  const int32_t input_0_ndim = 3;
  const int32_t input_0_dims[] = {3, 4, 5};
  float output_0[60];
  const int32_t output_0_ndim = 3;
  const int32_t output_0_dims[] = {3, 4, 5};
  const float answer_0[] = {
      0.32850933, 0.13364254,  1.171661,   0.22614476,  0.75363034, 0.38939148,
      1.5956291,  0.23756184,  0.51147854, 1.4226911,   0.02010123, 0.5678232,
      1.541213,   0.77426434,  0.94563985, 0.35861114,  2.058842,   0.040001184,
      0.80283463, 0.9266201,   0.11731918, 0.6653804,   0.23948292, 0.3698896,
      0.27398875, 0.7207754,   0.63963854, 1.3779292,   0.247692,   0.74817693,
      0.29667214, 1.3250277,   0.4428566,  0.117677756, 1.1797862,  1.4667867,
      0.679358,   0.113703586, 1.8667607,  0.17597108,  0.754801,   0.36061656,
      1.9848528,  0.055183206, 0.5254452,  0.6051861,   0.29676306, 1.9656936,
      1.36459,    0.7973592,   0.997574,   0.68527496,  0.9305327,  0.20848726,
      0.16072977, 0.2589024,   0.7212597,  0.78417134,  0.30299196, 1.5492778};
  ONNC_RUNTIME_abs_float(nullptr, input_0, input_0_ndim, input_0_dims, output_0,
                         output_0_ndim, output_0_dims);
  ASSERT_TRUE(relative_error(output_0, answer_0, 60) < 1e-5f);
}
